const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/route-transitions.BWgHaGMb.js","_astro/portfolio-loader.-z5lzify.js","_astro/spa-router.3jzHxz5n.js","_astro/hero-block.CQHbB6ve.js","_astro/UnrealBloomPass.D6T5-zMz.js"])))=>i.map(i=>d[i]);
import{_ as d}from"./spa-router.3jzHxz5n.js";import{prewarmHeroMask as L,setupHeroToTeamTransition as A}from"./route-transitions.BWgHaGMb.js";import{disposeHero as I,bootHero as T}from"./hero-block.CQHbB6ve.js";import{p as b}from"./portfolio-loader.-z5lzify.js";import"./UnrealBloomPass.D6T5-zMz.js";let a=null,c=!1,l=!1,h=!1,s=null,_=!1;function u(e){a=e,e&&c&&(c=!1,e.reassemble?.())}function w(e){const t=e?.detail;t?.canvas===s&&t?.api&&u(t.api)}function P(e){e?.detail?.canvas===s&&u(null)}function S(e){s!==e&&(s=e,u(e.__hero3d??null)),h||(document.addEventListener("hero:block-attached",w),document.addEventListener("hero:block-ready",w),document.addEventListener("hero:block-disposed",P),h=!0);const t=e.__hero3d;t&&u(t)}function k(){a?.reassemble?a.reassemble():c=!0}function R(){const e=()=>k();window.__PRIM3_LOADER_READY?e():window.addEventListener("site-loader:start",e,{once:!0})}async function D(e){if(console.log("[Hero] navigateWithHeroExplosion called"),l){console.warn("[Hero] Navigation already in flight");return}l=!0;try{const{triggerHeroTransition:t}=await d(async()=>{const{triggerHeroTransition:o}=await import("./route-transitions.BWgHaGMb.js");return{triggerHeroTransition:o}},__vite__mapDeps([0,1,2]));t(e,"hero3d",1100)}catch(t){console.error("[Hero] Transition failed",t),window.location.href=e}finally{l=!1}}let n=null,i=null;function C(e){if(e.dataset.heroNav==="1")return;e.dataset.heroNav="1";const t=()=>D("/team");n=o=>{console.log("[Hero] Click detected"),!(o.button!==0||o.metaKey||o.ctrlKey||o.altKey||o.shiftKey)&&(o.preventDefault(),t())},i=o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),t())},e.addEventListener("click",n),e.addEventListener("keydown",i),e.style.cursor="pointer"}function H(e){n&&(e.removeEventListener("click",n),n=null),i&&(e.removeEventListener("keydown",i),i=null),e.dataset.heroNav="0",e.style.cursor=""}async function N(e,t){if(!e)return;e.classList.add("hero-shell--active");const{bootHero:o}=await d(async()=>{const{bootHero:r}=await import("./hero-block.CQHbB6ve.js");return{bootHero:r}},__vite__mapDeps([3,2,4]));o(t)}function O(){const e=document.querySelector("[data-hero-shell]");let t=document.getElementById("hero3d");if(!e||!t)return;const o=window.__persistedHeroCanvas;o&&o!==t&&(console.log("[HeroStage] Restoring persisted canvas to slot"),t.getAttributeNames().forEach(g=>{const p=t.getAttribute(g);p!==null&&o.setAttribute(g,p)}),Object.assign(o.style,{position:"",inset:"",width:"100%",height:"100%",maxWidth:"",maxHeight:"",zIndex:"",pointerEvents:"",transform:""}),o.id="hero3d",t.replaceWith(o),t=o),S(t),t.dataset.heroNav="0",C(t),R();const r=()=>{T(),requestAnimationFrame(()=>{let f=!1;try{window.sessionStorage.getItem("__prim3_from_team__")==="1"&&(window.sessionStorage.removeItem("__prim3_from_team__"),f=!0)}catch{}N(e,{startExploded:f})})};window.__PRIM3_LOADER_READY?r():window.addEventListener("site-loader:start",r,{once:!0})}function x(){if(!_){if(a){const e=document.getElementById("hero3d");e&&H(e);const t=window.__persistedHeroCanvas;t&&H(t)}try{if(window.sessionStorage.getItem("__prim3_from_hero__")==="1"){console.log("[HeroStage] Skipping dispose due to hero->team transition");return}}catch{}_=!0,I()}}function q(){l=!1,a=null,c=!1,s=null,_=!1;try{window.sessionStorage.removeItem("__prim3_from_hero__")}catch{}const e=()=>{requestAnimationFrame(()=>{O()})};document.readyState!=="loading"?e():document.addEventListener("DOMContentLoaded",e,{once:!0})}const B="[home]";let m=null,v=!1,y=!1,E=!1;function Q(e=typeof window<"u"?window.location.pathname:""){return e==="/"||e==="/index.html"}async function K(){return m||(m=Promise.all([d(()=>import("https://esm.sh/gsap@3.12.5"),[]),d(()=>import("https://esm.sh/gsap@3.12.5/ScrollTrigger?external=gsap"),[])]).then(([e,t])=>{const o=e.gsap??e.default??e,r=t.ScrollTrigger??t.default??t;return v||(o.registerPlugin(r),v=!0),{gsap:o,ScrollTrigger:r}})),m}function F(){if(y)return;y=!0;const e=()=>b().catch(()=>{});"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e,1200)}function V(){const e=document.querySelector('a[href="/team"]');if(!e||e.dataset.teamPrefetchBound==="1")return;e.dataset.teamPrefetchBound="1";const t=()=>b().catch(()=>{});e.addEventListener("mouseenter",t,{once:!0}),e.addEventListener("focus",t,{once:!0})}function W(e){e.utils.toArray(".reveal").forEach(o=>{o.dataset.revealBound!=="1"&&(o.dataset.revealBound="1",e.from(o,{opacity:0,y:50,duration:1,ease:"power2.out",scrollTrigger:{trigger:o,start:"top 85%"},immediateRender:!1}))})}function M(){x()}async function Y(e){if(typeof window>"u"||typeof document>"u")return;E||(document.addEventListener("astro:before-swap",M),E=!0),q(),L("/logo.png"),A({linkSelector:'a[href="/team"]',sourceCanvasId:"hero3d",duration:1100});const{gsap:t}=await K();W(t),F(),V(),console.log(`${B} ready`)}function j(e){Y()}function X(){j()}export{j as initHomePage,X as initHomeScripts,Q as isHomeRoute};
